import styled from "styled-components";
import Icon from "./components/Icon";
import { activeColor, primaryColor } from "./constants";
import { useAppState } from "./state";
import {
  interpolate,
  motion,
  MotionValue,
  useMotionTemplate,
  useTransform,
} from "framer-motion";

const swipeLeft = `<svg viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M81.742 91.27c-4.25-1.034-8.92.165-11.568 4.08-2.648 3.915-2.013 8.674.555 12.205a9.77 9.77 0 0 0-2.995 2.885c-3.529 5.219-1.218 11.944 3.721 15.252l1.772 1.187a9.773 9.773 0 0 0-2.307 2.419c-3.53 5.218-1.215 11.946 3.72 15.252l23.137 15.497c2.826 1.998 10.608 7.228 20.104 8.61 4.848.708 10.224.426 15.605-1.85 5.396-2.28 10.535-6.455 15.084-13.119l.008-.012c4.951-7.321 5.753-16.226 5.321-23.411a67.852 67.852 0 0 0-2.811-15.37 19.456 19.456 0 0 1-.333-1.161l-3.961-16.405-.02-.083c-1.537-5.744-7.438-9.696-13.363-8.95-6.266.787-10.175 6.514-8.616 12.583l.378 1.836-26.28-17.601c-4.935-3.306-12.063-2.908-15.592 2.31a9.83 9.83 0 0 0-1.561 3.85m9.35 5.326c-2.344-1.588-2.47-3.971-1.703-5.105.767-1.135 3.05-1.922 5.422-.333l33.721 22.586a3.674 3.674 0 0 0 4.086.002 3.632 3.632 0 0 0 1.55-3.762l-2.208-10.674-.04-.203c-.496-1.845.516-3.342 2.421-3.58 2.268-.286 4.731 1.352 5.342 3.55l3.942 16.362c.146.586.301 1.13.465 1.63a60.048 60.048 0 0 1 2.486 13.628c.393 6.503-.43 13.504-4.077 18.896-3.881 5.686-7.98 8.846-11.876 10.494-3.912 1.654-7.885 1.901-11.675 1.345-7.719-1.124-14.323-5.5-16.955-7.368l-23.254-15.576c-2.372-1.589-2.501-3.985-1.734-5.12.767-1.134 3.05-1.921 5.422-.332l11.457 7.674c.806.54 1.796.739 2.75.554a3.669 3.669 0 0 0 2.338-1.544 3.634 3.634 0 0 0-.994-5.064l-22.427-15.021c-2.372-1.589-2.499-3.99-1.732-5.124.768-1.134 3.05-1.922 5.423-.333l22.426 15.021a3.677 3.677 0 0 0 5.089-.989 3.636 3.636 0 0 0-.995-5.064l-27.771-18.601c-2.373-1.59-2.502-3.986-1.732-5.124.767-1.135 3.05-1.922 5.422-.333l27.009 18.091c.807.54 1.796.739 2.751.554a3.669 3.669 0 0 0 2.338-1.544 3.636 3.636 0 0 0-.994-5.064L91.09 96.599ZM116.279 73.5a3.509 3.509 0 0 0 2.128 1.671 3.536 3.536 0 0 0 3.733-1.23 3.505 3.505 0 0 0 .704-2.605 3.487 3.487 0 0 0-.447-1.3c-3.645-6.377-8.121-11.12-14.385-14.253-6.171-3.086-13.767-4.447-23.4-4.67l-25.522-.588L72.147 38.12a3.503 3.503 0 0 0 1.177-2.474 3.487 3.487 0 0 0-.97-2.562A3.52 3.52 0 0 0 69.827 32a3.534 3.534 0 0 0-2.538 1.056L48.088 51.3a3.493 3.493 0 0 0-.115 4.95l18.331 19.108a3.529 3.529 0 0 0 4.89.026 3.495 3.495 0 0 0 .199-4.86L58.927 57.528l25.523.588c9.134.21 15.554 1.503 20.403 3.927 4.761 2.38 8.305 5.998 11.422 11.456" fill="currentColor"/></svg>`;
const confirm = `<svg viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M138.87 64.031c1.151-4.063 4.402-7.415 8.995-7.773 4.593-.358 8.336 2.443 10.112 6.283a9.55 9.55 0 0 1 3.883-1.14c6.123-.478 10.737 4.669 11.19 10.395l.162 2.054c1-.44 2.069-.706 3.159-.785 6.123-.478 10.737 4.673 11.19 10.395l2.122 26.821c.349 3.326 1.078 12.357-2.284 20.991-1.714 4.41-4.522 8.792-9.028 12.228-4.516 3.446-10.521 5.773-18.36 6.417l-.014.002c-8.589.669-16.543-2.901-22.445-6.689a66.37 66.37 0 0 1-11.725-9.686 18.09 18.09 0 0 0-.828-.834l-12.054-11.146-.062-.057c-4.149-4.028-4.691-10.869-1.226-15.491 3.663-4.888 10.399-5.442 14.815-1.24l1.38 1.193-2.41-30.465c-.453-5.721 3.291-11.52 9.413-11.997a9.69 9.69 0 0 1 4.02.524m.06 10.392c-.23-2.725-2.196-3.967-3.526-3.864-1.331.104-3.091 1.646-2.873 4.397l3.093 39.091a3.528 3.528 0 0 1-1.95 3.434 3.58 3.58 0 0 1-3.94-.491l-8.02-6.943-.153-.13c-1.332-1.296-3.088-1.159-4.2.328-1.327 1.768-1.111 4.618.465 6.179l12.028 11.11c.429.402.817.791 1.164 1.168a58.789 58.789 0 0 0 10.399 8.583c5.34 3.429 11.686 6.075 18.012 5.582 6.689-.55 11.333-2.488 14.596-4.975 3.275-2.497 5.384-5.718 6.721-9.166 2.732-7.02 2.166-14.654 1.835-17.755l-2.133-26.957c-.217-2.75-2.193-4.001-3.524-3.897-1.331.103-3.09 1.646-2.873 4.396l1.051 13.281a3.52 3.52 0 0 1-.843 2.575 3.57 3.57 0 0 1-2.429 1.228 3.573 3.573 0 0 1-2.593-.837 3.525 3.525 0 0 1-1.238-2.412l-2.057-25.998c-.217-2.75-2.198-4.001-3.529-3.897-1.33.104-3.09 1.646-2.873 4.396l2.057 25.998a3.52 3.52 0 0 1-.843 2.575 3.566 3.566 0 0 1-2.429 1.228 3.577 3.577 0 0 1-2.593-.836 3.532 3.532 0 0 1-1.238-2.413l-2.547-32.194c-.217-2.75-2.194-4.001-3.529-3.897-1.33.103-3.09 1.646-2.873 4.396l2.478 31.31a3.523 3.523 0 0 1-.843 2.575 3.576 3.576 0 0 1-5.023.392 3.529 3.529 0 0 1-1.237-2.412l-1.99-25.148ZM67.518 62.811c-.724-4.159-3.611-7.824-8.143-8.649-4.532-.824-8.544 1.581-10.708 5.22a9.537 9.537 0 0 0-3.745-1.53c-6.04-1.1-11.163 3.55-12.205 9.2l-.374 2.026a9.546 9.546 0 0 0-3.061-1.103c-6.041-1.099-11.164 3.554-12.206 9.2l-4.884 26.463c-.69 3.273-2.35 12.181.102 21.113 1.249 4.562 3.588 9.206 7.716 13.083 4.136 3.888 9.868 6.815 17.599 8.255l.014.003c8.475 1.542 16.755-1.2 23.018-4.366a66.464 66.464 0 0 0 12.664-8.44c.296-.257.6-.506.91-.745l13.144-9.858.067-.051c4.544-3.584 5.79-10.333 2.82-15.284-3.137-5.236-9.78-6.473-14.607-2.744l-1.497 1.046 5.547-30.058c1.042-5.645-2.082-11.794-8.123-12.893a9.696 9.696 0 0 0-4.052.111m-1.135 10.332c.511-2.688 2.595-3.723 3.908-3.484 1.313.239 2.904 1.952 2.403 4.666l-7.118 38.57a3.513 3.513 0 0 0 .238 2.046 3.547 3.547 0 0 0 1.346 1.568 3.579 3.579 0 0 0 3.97-.087l8.695-6.089.166-.113c1.459-1.154 3.192-.839 4.144.753 1.138 1.895.628 4.708-1.102 6.1l-13.113 9.825a22.87 22.87 0 0 0-1.278 1.043 58.892 58.892 0 0 1-11.232 7.478c-5.666 2.867-12.252 4.852-18.494 3.717-6.597-1.229-11.016-3.63-14.004-6.436-3-2.819-4.764-6.237-5.738-9.803-1.992-7.262-.64-14.797.01-17.848L24.09 78.45c.5-2.713 2.596-3.756 3.909-3.517 1.313.239 2.904 1.952 2.403 4.666l-2.419 13.104c-.17.922.036 1.874.573 2.646a3.583 3.583 0 0 0 4.955.902 3.534 3.534 0 0 0 1.48-2.273l4.735-25.652c.5-2.713 2.6-3.755 3.913-3.516 1.313.239 2.904 1.952 2.403 4.665l-4.734 25.652c-.17.923.035 1.875.572 2.647a3.582 3.582 0 0 0 4.955.901 3.535 3.535 0 0 0 1.48-2.273l5.863-31.765c.501-2.714 2.596-3.757 3.914-3.517 1.313.239 2.904 1.952 2.403 4.666l-5.702 30.893c-.17.923.036 1.875.572 2.647a3.582 3.582 0 0 0 4.955.901 3.534 3.534 0 0 0 1.481-2.273l4.58-24.812Z" fill="currentColor"/></svg>`;
const swipeRight = `<svg viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M119.258 91.27c4.25-1.034 8.921.165 11.568 4.08 2.648 3.915 2.013 8.674-.555 12.205a9.77 9.77 0 0 1 2.995 2.885c3.529 5.219 1.219 11.944-3.721 15.252l-1.772 1.187a9.768 9.768 0 0 1 2.307 2.419c3.529 5.218 1.215 11.946-3.72 15.252l-23.137 15.497c-2.826 1.998-10.608 7.228-20.104 8.61-4.848.708-10.224.426-15.605-1.85-5.396-2.28-10.535-6.455-15.084-13.119l-.008-.012c-4.951-7.321-5.753-16.226-5.32-23.411a67.813 67.813 0 0 1 2.81-15.37c.123-.383.234-.771.333-1.161l3.961-16.405.02-.083c1.537-5.744 7.438-9.696 13.363-8.95 6.266.787 10.174 6.514 8.617 12.583l-.379 1.836 26.279-17.601c4.936-3.306 12.064-2.908 15.593 2.31a9.84 9.84 0 0 1 1.562 3.85M109.91 96.6c2.344-1.588 2.47-3.971 1.703-5.105-.767-1.135-3.049-1.922-5.422-.333l-33.72 22.586a3.675 3.675 0 0 1-4.087.002 3.65 3.65 0 0 1-1.35-1.646 3.632 3.632 0 0 1-.2-2.116l2.209-10.674.04-.203c.496-1.845-.517-3.342-2.422-3.58-2.268-.286-4.731 1.352-5.342 3.55l-3.943 16.362c-.145.586-.3 1.13-.464 1.63a60.07 60.07 0 0 0-2.486 13.628c-.393 6.503.43 13.504 4.077 18.896 3.88 5.686 7.98 8.846 11.876 10.494 3.912 1.654 7.885 1.901 11.675 1.345 7.72-1.124 14.323-5.5 16.955-7.368l23.254-15.576c2.372-1.589 2.501-3.985 1.734-5.12-.767-1.134-3.05-1.921-5.422-.332l-11.457 7.674a3.684 3.684 0 0 1-2.75.554 3.669 3.669 0 0 1-2.338-1.544 3.632 3.632 0 0 1-.557-2.737 3.643 3.643 0 0 1 1.551-2.327l22.427-15.021c2.372-1.589 2.498-3.99 1.731-5.124-.767-1.134-3.049-1.922-5.422-.333l-22.426 15.021a3.676 3.676 0 0 1-5.089-.989 3.634 3.634 0 0 1 .995-5.064l27.771-18.601c2.373-1.589 2.502-3.986 1.732-5.124-.767-1.135-3.05-1.922-5.422-.333l-27.01 18.091a3.685 3.685 0 0 1-2.75.554 3.669 3.669 0 0 1-2.338-1.544 3.634 3.634 0 0 1 .994-5.064l21.693-14.53ZM84.72 73.5a3.506 3.506 0 0 1-2.127 1.671 3.536 3.536 0 0 1-3.733-1.23 3.496 3.496 0 0 1-.704-2.605 3.49 3.49 0 0 1 .447-1.3c3.645-6.377 8.12-11.12 14.385-14.253 6.171-3.086 13.767-4.447 23.399-4.67l25.523-.588-13.057-12.405a3.507 3.507 0 0 1-1.178-2.474 3.49 3.49 0 0 1 .971-2.562 3.53 3.53 0 0 1 5.065-.028L152.912 51.3a3.494 3.494 0 0 1 .116 4.95l-18.332 19.108a3.53 3.53 0 0 1-4.889.026 3.492 3.492 0 0 1-.2-4.86l12.466-12.994-25.523.588c-9.134.21-15.554 1.503-20.403 3.927-4.76 2.38-8.305 5.998-11.422 11.456" fill="currentColor"/></svg>`;

function useButtonAnimations(value: MotionValue) {
  const bgOpacity = useTransform(() =>
    interpolate([0, 1], [0, 0.3])(value.get())
  );
  const iconScale = useTransform(() =>
    interpolate([0, 1], [1, 0.9])(value.get())
  );
  return { bgOpacity, iconScale };
}

export function Header() {
  const { animations } = useAppState();
  const left = useButtonAnimations(animations.leftButton);
  const middle = useButtonAnimations(animations.middleButton);
  const right = useButtonAnimations(animations.rightButton);

  return (
    <Container>
      <IconWrapper
        style={{
          height: "9vh",
          aspectRatio: 1.28,
          backgroundColor: useMotionTemplate`rgba(0,0,0,${left.bgOpacity})`,
        }}
      >
        <motion.div
          style={{ scale: left.iconScale, width: "100%", height: "100%" }}
        >
          <Icon svg={swipeLeft} color={activeColor} />
        </motion.div>
      </IconWrapper>
      <IconWrapper
        style={{
          height: "9vh",
          aspectRatio: 1.28,
          backgroundColor: useMotionTemplate`rgba(0,0,0,${middle.bgOpacity})`,
        }}
      >
        <motion.div
          style={{ scale: middle.iconScale, width: "100%", height: "100%" }}
        >
          <Icon svg={confirm} color={activeColor} />
        </motion.div>
      </IconWrapper>
      <IconWrapper
        style={{
          height: "9vh",
          aspectRatio: 1.28,
          backgroundColor: useMotionTemplate`rgba(0,0,0,${right.bgOpacity})`,
        }}
      >
        <motion.div
          style={{ scale: right.iconScale, width: "100%", height: "100%" }}
        >
          <Icon svg={swipeRight} color={activeColor} />
        </motion.div>
      </IconWrapper>
    </Container>
  );
}

const Container = styled.div`
  position: relative;
  overflow: hidden;
  padding-top: 1rem;
  padding-bottom: 1rem;
  height: 15vh;
  background-color: ${primaryColor};
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin: 0 1rem;
  padding: 1rem 2rem;
  border-radius: 8px;
`;

const IconWrapper = styled(motion.div)`
  display: flex;
  border-radius: 20px;
  align-items: center;
  justify-content: center;
  padding: 1rem;
  background-color: rgba(0, 0, 0, 0);
`;
